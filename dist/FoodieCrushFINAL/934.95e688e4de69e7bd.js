"use strict";(self.webpackChunkFoodieCrushFINAL=self.webpackChunkFoodieCrushFINAL||[]).push([[934],{3934:(Z,T,s)=>{s.r(T),s.d(T,{PendingCommentsModule:()=>M});var a=s(6895),g=s(1948),h=s(5226),d=s.n(h),e=s(8274),P=s(7501),u=s(5800),A=s(4984),t=s(7318),r=s(805);function i(o,c){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-spinner"),e.qZA())}function m(o,c){1&o&&(e.TgZ(0,"div")(1,"p"),e._uU(2,"\xa1Buen trabajo no hay comentarios pendientes de aprobar!"),e.qZA()())}function p(o,c){1&o&&(e.TgZ(0,"p"),e._uU(1," Solo existe 1 comentario que todav\xeda no has aprobado. Tenemos trabajo por hacer, \xa1adelante! "),e.qZA())}function _(o,c){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const n=e.oxw(3);e.xp6(1),e.hij(" Existen un total de ",n.commentsPending.length," comentarios que todav\xeda no has aprobado. Tenemos trabajo por hacer, \xa1adelante! ")}}function x(o,c){1&o&&(e.TgZ(0,"tr",15)(1,"th",16),e._uU(2," ID "),e._UZ(3,"p-sortIcon",17),e.qZA(),e.TgZ(4,"th",18),e._uU(5," PUBLICADO POR "),e._UZ(6,"p-sortIcon",19),e.qZA(),e.TgZ(7,"th",20),e._uU(8," RECETA "),e._UZ(9,"p-sortIcon",21),e.qZA(),e.TgZ(10,"th",22),e._uU(11," FECHA PUBLICACI\xd3N "),e._UZ(12,"p-sortIcon",23),e.qZA(),e.TgZ(13,"th",24),e._uU(14,"VER"),e.qZA(),e.TgZ(15,"th",24),e._uU(16,"APROBAR"),e.qZA(),e.TgZ(17,"th",24),e._uU(18,"ELIMINAR"),e.qZA()())}function B(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"tr",25)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"button",26),e.NdJ("click",function(){const v=e.CHM(n).$implicit,f=e.oxw(3);return e.KtG(f.showComment(v))}),e._UZ(11,"i",27),e.qZA()(),e.TgZ(12,"td")(13,"button",28),e.NdJ("click",function(){const v=e.CHM(n).$implicit,f=e.oxw(3);return e.KtG(f.changeStatusComment(v.id))}),e._UZ(14,"i",29),e.qZA()(),e.TgZ(15,"td")(16,"button",30),e.NdJ("click",function(){const v=e.CHM(n).$implicit,f=e.oxw(3);return e.KtG(f.deleteComment(v.id))}),e._UZ(17,"i",31),e.qZA()()()}if(2&o){const n=c.$implicit;e.xp6(2),e.Oqu(n.id),e.xp6(2),e.Oqu(n.username.toUpperCase()),e.xp6(2),e.Oqu(n.recipeName.toUpperCase()),e.xp6(2),e.Oqu(n.fechaBonita)}}const b=function(){return[10,25,50]};function E(o,c){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,p,2,0,"p",8),e.YNc(2,_,2,1,"p",8),e.TgZ(3,"p-table",12),e.YNc(4,x,19,0,"ng-template",13),e.YNc(5,B,18,4,"ng-template",14),e.qZA()()),2&o){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",1==n.commentsPending.length),e.xp6(1),e.Q6J("ngIf",n.commentsPending.length>1),e.xp6(1),e.Q6J("value",n.commentsPending)("paginator",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(7,b))}}function $(o,c){if(1&o&&(e.TgZ(0,"div")(1,"div",11),e.YNc(2,m,3,0,"div",8),e.YNc(3,E,6,8,"div",8),e.qZA()()),2&o){const n=e.oxw();e.xp6(2),e.Q6J("ngIf",null==n.commentsPending),e.xp6(1),e.Q6J("ngIf",null!=n.commentsPending)}}const U=[{path:"",component:(()=>{class o{constructor(n,l){this.adminService=n,this.recipesService=l,this.first=0,this.rows=10,this.pending=!0,this.commentsPending=[]}ngOnInit(){this.getCommentsPending()}getCommentsPending(){this.adminService.getCommentsPending().subscribe({next:n=>{this.commentsPending=n,this.pending=!1},error:n=>{d().fire("Error",n.error.mensaje,"error")}})}showComment(n){d().fire("Contenido del comentario con id: "+n.id,n.message,"info")}changeStatusComment(n){this.adminService.changeStatusComment(n).subscribe({next:l=>{this.getCommentsPending(),d().fire({title:"Cambio de Estado Satisfactorio",text:"El comentario con id  "+l.id+" ha sido aprobado.",icon:"success",confirmButtonText:"Aceptar"})},error:l=>{d().fire("Error",l.error.mensaje,"error")}})}deleteComment(n){d().fire({title:"Eliminaci\xf3n de comentario",text:"A continuaci\xf3n vas a eliminar este comentario. \xbfSeguro que deseas eliminar esta comentario?",icon:"warning",showDenyButton:!0,confirmButtonText:"S\xed, quiero borrar el comentario.",denyButtonText:"No."}).then(l=>{l.isConfirmed&&this.recipesService.deleteComment(n).subscribe({next:C=>{this.getCommentsPending(),null==C&&d().fire({title:"Comentario Eliminado",text:"El comentario con id  "+n+" ha sido eliminado.",icon:"success",confirmButtonText:"Aceptar"})},error:C=>{d().fire("Error",C.error.mensaje,"error")}})})}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(P.l),e.Y36(u.v))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-pending-comments"]],decls:17,vars:2,consts:[[1,"row","p-1","my-3","justify-content-center"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/optionsADMIN"],[1,"breadcrumb-item","active"],["routerLink","/optionsADMIN/commentsConf"],["aria-current","page",1,"breadcrumb-item","active"],[4,"ngIf"],[1,"text-center","mb-2"],["routerLink","/optionsADMIN/commentsConf",1,"btn","colorPurpleP"],[1,"p-3","text-center","my-3"],["styleClass","p-datatable-striped","responsiveLayout","scroll","currentPageReportTemplate","Mostrando {first} de {last} de un total de {totalRecords} entradas",3,"value","paginator","rows","showCurrentPageReport","rowsPerPageOptions"],["pTemplate","header"],["pTemplate","body"],[1,"colorGreenP","text-center"],["pSortableColumn","id",1,"encab"],["field","id"],["pSortableColumn","username",1,"encab"],["field","username"],["pSortableColumn","category.name",1,"encab"],["field","category.name"],["pSortableColumn","fechaBonita",1,"encab"],["field","fechaBonita"],[1,"encab"],[1,"text-center"],[1,"btn","colorYellowP",3,"click"],[1,"fa","fa-search"],[1,"btn","colorPinkP",3,"click"],[1,"fas","fa-check-circle"],[1,"btn","colorPurpleP",3,"click"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(n,l){1&n&&(e.TgZ(0,"div",0)(1,"nav",1)(2,"ol",2)(3,"li",3)(4,"a",4),e._uU(5,"GESTI\xd3N"),e.qZA()(),e.TgZ(6,"li",5)(7,"a",6),e._uU(8," COMENTARIOS "),e.qZA()(),e.TgZ(9,"li",7),e._uU(10,"PENDIENTES"),e.qZA()()()(),e.YNc(11,i,2,0,"div",8),e.YNc(12,$,4,2,"div",8),e.TgZ(13,"div",0)(14,"div",9)(15,"button",10),e._uU(16," ATR\xc1S "),e.qZA()()()),2&n&&(e.xp6(11),e.Q6J("ngIf",l.pending),e.xp6(1),e.Q6J("ngIf",!l.pending))},dependencies:[a.O5,g.rH,g.yS,A.O,t.iA,r.jx,t.lQ,t.fz]}),o})()}];let y=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(U),g.Bz]}),o})();var S=s(4466),I=s(5593),R=s(1997);let M=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[a.ez,y,S.m,t.U$,I.hJ,R.U]}),o})()},5800:(Z,T,s)=>{s.d(T,{v:()=>P});var a=s(529),g=s(2340),h=s(8274),d=s(1948),e=s(8827);let P=(()=>{class u{constructor(t,r,i){this.httpClient=t,this.router=r,this.accessService=i,this.urlBase=g.N.urlBase}publicar(t){let r=this.accessService.getToken();const i=`${this.urlBase}/recipes`,m=t,p=new a.WM({"Content-Type":"application/json",Authorization:`Bearer ${r}`});return this.httpClient.post(i,m,{headers:p})}getRecipesFromUser(t){let r=this.accessService.getToken();const i=(new a.LE).set("userID",t.id),m=new a.WM({"Content-Type":"application/json",Authorization:`Bearer ${r}`});return this.httpClient.get(`${this.urlBase}/recipes?${i}`,{headers:m})}getRecipesByCategory(t){const r=(new a.LE).set("categoryID",t);return this.httpClient.get(`${this.urlBase}/mostrar?${r}`)}showRecipe(t){return this.httpClient.get(`${this.urlBase}/mostrar/${t}`)}getUserByRecipe(t){return this.httpClient.get(`${this.urlBase}/mostrar/recipe/${t}`)}getCategory(t){return this.httpClient.get(`${this.urlBase}/category/${t}`)}getImage(t){return`data:image/png;base64,${btoa(String.fromCharCode(...new Uint8Array(t.data)))}`+t.data}getAllRecipes(){let t=this.accessService.getToken();const r=new a.WM({"Content-Type":"application/json",Authorization:`Bearer ${t}`});return this.httpClient.get(`${this.urlBase}/recipes`,{headers:r})}deleteRecipe(t){let r=this.accessService.getToken();const i=new a.WM({"Content-Type":"application/json",Authorization:`Bearer ${r}`});return this.httpClient.delete(`${this.urlBase}/recipes/${t}`,{headers:i})}editRecipe(t,r){let i=this.accessService.getToken();const m=new a.WM({"Content-Type":"application/json",Authorization:`Bearer ${i}`});return this.httpClient.put(`${this.urlBase}/recipes/${t}`,r,{headers:m})}addCommentToRecipe(t,r){let i=this.accessService.getToken();const m=new a.WM({"Content-Type":"application/json",Authorization:`Bearer ${i}`});return this.httpClient.post(`${this.urlBase}/recipes/${t}/comments`,r,{headers:m})}getCommentsNotPendingFromRecipe(t){return this.httpClient.get(`${this.urlBase}/mostrar/recipe/${t}/comments`)}deleteComment(t){let r=this.accessService.getToken();const i=new a.WM({"Content-Type":"application/json",Authorization:`Bearer ${r}`});return this.httpClient.delete(`${this.urlBase}/recipes/comments/${t}`,{headers:i})}getRecipeByName(t){const r=(new a.LE).set("recipeName",t);return this.httpClient.get(`${this.urlBase}/mostrar/recipes/name?${r}`)}getRecipeBySimilarName(t){const r=(new a.LE).set("recipeName",t);return this.httpClient.get(`${this.urlBase}/mostrar/recipes/similar?${r}`)}getRecipesFromIngredients(t){let r=new a.LE;return r=r.append("ingredientList",t),this.httpClient.get(`${this.urlBase}/mostrar/recipes/ingredients`,{params:r})}getIngredientsFromBD(){return this.httpClient.get(`${this.urlBase}/mostrar/ingredients`)}}return u.\u0275fac=function(t){return new(t||u)(h.LFG(a.eN),h.LFG(d.F0),h.LFG(e.v))},u.\u0275prov=h.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);