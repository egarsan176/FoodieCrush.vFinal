"use strict";(self.webpackChunkFoodieCrushFINAL=self.webpackChunkFoodieCrushFINAL||[]).push([[263],{5800:(R,C,a)=>{a.d(C,{v:()=>f});var l=a(529),_=a(2340),e=a(8274),h=a(1948),T=a(8827);let f=(()=>{class d{constructor(i,r,o){this.httpClient=i,this.router=r,this.accessService=o,this.urlBase=_.N.urlBase}publicar(i){let r=this.accessService.getToken();const o=`${this.urlBase}/recipes`,p=i,u=new l.WM({"Content-Type":"application/json",Authorization:`Bearer ${r}`});return this.httpClient.post(o,p,{headers:u})}getRecipesFromUser(i){let r=this.accessService.getToken();const o=(new l.LE).set("userID",i.id),p=new l.WM({"Content-Type":"application/json",Authorization:`Bearer ${r}`});return this.httpClient.get(`${this.urlBase}/recipes?${o}`,{headers:p})}getRecipesByCategory(i){const r=(new l.LE).set("categoryID",i);return this.httpClient.get(`${this.urlBase}/mostrar?${r}`)}showRecipe(i){return this.httpClient.get(`${this.urlBase}/mostrar/${i}`)}getUserByRecipe(i){return this.httpClient.get(`${this.urlBase}/mostrar/recipe/${i}`)}getCategory(i){return this.httpClient.get(`${this.urlBase}/category/${i}`)}getImage(i){return`data:image/png;base64,${btoa(String.fromCharCode(...new Uint8Array(i.data)))}`+i.data}getAllRecipes(){let i=this.accessService.getToken();const r=new l.WM({"Content-Type":"application/json",Authorization:`Bearer ${i}`});return this.httpClient.get(`${this.urlBase}/recipes`,{headers:r})}deleteRecipe(i){let r=this.accessService.getToken();const o=new l.WM({"Content-Type":"application/json",Authorization:`Bearer ${r}`});return this.httpClient.delete(`${this.urlBase}/recipes/${i}`,{headers:o})}editRecipe(i,r){let o=this.accessService.getToken();const p=new l.WM({"Content-Type":"application/json",Authorization:`Bearer ${o}`});return this.httpClient.put(`${this.urlBase}/recipes/${i}`,r,{headers:p})}addCommentToRecipe(i,r){let o=this.accessService.getToken();const p=new l.WM({"Content-Type":"application/json",Authorization:`Bearer ${o}`});return this.httpClient.post(`${this.urlBase}/recipes/${i}/comments`,r,{headers:p})}getCommentsNotPendingFromRecipe(i){return this.httpClient.get(`${this.urlBase}/mostrar/recipe/${i}/comments`)}deleteComment(i){let r=this.accessService.getToken();const o=new l.WM({"Content-Type":"application/json",Authorization:`Bearer ${r}`});return this.httpClient.delete(`${this.urlBase}/recipes/comments/${i}`,{headers:o})}getRecipeByName(i){const r=(new l.LE).set("recipeName",i);return this.httpClient.get(`${this.urlBase}/mostrar/recipes/name?${r}`)}getRecipeBySimilarName(i){const r=(new l.LE).set("recipeName",i);return this.httpClient.get(`${this.urlBase}/mostrar/recipes/similar?${r}`)}getRecipesFromIngredients(i){let r=new l.LE;return r=r.append("ingredientList",i),this.httpClient.get(`${this.urlBase}/mostrar/recipes/ingredients`,{params:r})}getIngredientsFromBD(){return this.httpClient.get(`${this.urlBase}/mostrar/ingredients`)}}return d.\u0275fac=function(i){return new(i||d)(e.LFG(l.eN),e.LFG(h.F0),e.LFG(T.v))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},5263:(R,C,a)=>{a.d(C,{A:()=>U});var l=a(5226),_=a.n(l),e=a(8274),h=a(1948),T=a(5800),f=a(162),d=a(8827),v=a(6895),i=a(433);function r(n,c){1&n&&(e.TgZ(0,"div",8),e._UZ(1,"img",9),e.qZA())}function o(n,c){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"img",10),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.s9C("src",t.img,e.LSH),e.s9C("alt",t.recipe.recipeName)}}function p(n,c){if(1&n&&(e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,r,2,0,"div",4),e.YNc(3,o,2,2,"div",4),e.TgZ(4,"div",5)(5,"div",6)(6,"p",7)(7,"strong"),e._uU(8,"Nombre:"),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"p",7)(11,"strong"),e._uU(12,"Categor\xeda:"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"p",7)(15,"strong"),e._uU(16,"Fecha de publicaci\xf3n:"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"p",7)(19,"strong"),e._uU(20,"Publicada por:"),e.qZA(),e._uU(21),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",null==t.recipe.file),e.xp6(1),e.Q6J("ngIf",null!=t.recipe.file),e.xp6(6),e.hij(" ",t.recipe.recipeName.toUpperCase()," "),e.xp6(4),e.hij(" ",t.recipe.category.name.toUpperCase()," "),e.xp6(4),e.hij(" ",t.recipe.fechaBonita," "),e.xp6(4),e.hij(" ",t.user.username," ")}}function u(n,c){if(1&n&&(e.TgZ(0,"ul",28)(1,"li"),e._uU(2),e.qZA()()),2&n){const t=c.$implicit;e.xp6(2),e.AsE(" ",t.amount," GRAMOS DE ",t.ingredient.name.toUpperCase()," ")}}function g(n,c){if(1&n&&(e.TgZ(0,"ul",28)(1,"li"),e._uU(2),e.qZA()()),2&n){const t=c.$implicit,s=c.index;e.xp6(2),e.AsE("",s+1,". ",t.step.toUpperCase(),"")}}function x(n,c){if(1&n&&(e.TgZ(0,"ul",28)(1,"label",29),e._uU(2),e.qZA(),e.TgZ(3,"li"),e._uU(4),e.qZA()()),2&n){const t=c.$implicit;e.xp6(2),e.AsE("Comentado por: ",t.username,", el ",t.fechaBonita,":"),e.xp6(2),e.hij(" ",t.message," ")}}function E(n,c){if(1&n&&(e.TgZ(0,"div",28),e.YNc(1,x,5,3,"ul",19),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.comments)}}function A(n,c){1&n&&(e.TgZ(0,"div",30)(1,"p"),e._uU(2,"\xa1Vaya! Esta receta a\xfan no tiene comentarios."),e.qZA()())}function D(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"label"),e._uU(2,"\xbfQuieres comentar algo sobre esta receta? Hazlo aqu\xed "),e.qZA(),e._UZ(3,"br"),e.TgZ(4,"textarea",31),e.NdJ("ngModelChange",function(m){e.CHM(t);const b=e.oxw(2);return e.KtG(b.texto=m)}),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"button",32),e.NdJ("click",function(){e.CHM(t);const m=e.oxw(2);return e.KtG(m.addComment(m.recipe.id))}),e._uU(7," ENVIAR "),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngModel",t.texto)}}function Z(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",33)(2,"p")(3,"i"),e._uU(4,"\xbfQuieres publicar un comentario en esta receta?"),e.qZA()(),e.TgZ(5,"p",34),e.NdJ("click",function(){e.CHM(t);const m=e.oxw(2);return e.KtG(m.saveIDtoComment())}),e._uU(6," Haz click "),e.TgZ(7,"b")(8,"u"),e._uU(9,"AQU\xcd"),e.qZA()(),e._uU(10," para iniciar sesi\xf3n. "),e.qZA()()()}}function B(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",11)(1,"ul",12)(2,"li",13)(3,"button",14),e._uU(4," Ingredientes "),e.qZA()(),e.TgZ(5,"li",13)(6,"button",15),e._uU(7," Elaboraci\xf3n "),e.qZA()(),e.TgZ(8,"li",13)(9,"button",16),e._uU(10," Comentarios "),e.qZA()()(),e.TgZ(11,"div",17)(12,"div",18),e.YNc(13,u,3,2,"ul",19),e.qZA(),e.TgZ(14,"div",20),e.YNc(15,g,3,2,"ul",19),e.qZA(),e.TgZ(16,"div",21),e.YNc(17,E,2,1,"div",22),e.YNc(18,A,3,0,"div",23),e._UZ(19,"hr"),e.YNc(20,D,8,1,"div",24),e.YNc(21,Z,11,0,"div",24),e.qZA()(),e.TgZ(22,"div",25)(23,"div",26)(24,"button",27),e.NdJ("click",function(){e.CHM(t);const m=e.oxw();return e.KtG(m.back())}),e._uU(25,"VOLVER"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(13),e.Q6J("ngForOf",t.recipe.ingredientLine),e.xp6(2),e.Q6J("ngForOf",t.recipe.method),e.xp6(2),e.Q6J("ngIf",t.showComments),e.xp6(1),e.Q6J("ngIf",!t.showComments||null==t.comments),e.xp6(2),e.Q6J("ngIf",null!=t.showPostComment()),e.xp6(1),e.Q6J("ngIf",null===t.showPostComment())}}let U=(()=>{class n{constructor(t,s,m,b,y){this.activeRoute=t,this.recipeService=s,this.fileService=m,this.accessService=b,this.router=y,this.id=0,this.ruta="",this.img="",this.mostrar=!1,this.showComments=!1,this.texto="",this.commentRecipe={message:""}}ngOnInit(){this.showRecipeDetails()}showRecipeDetails(){this.recipeService.showRecipe(this.activeRoute.snapshot.params.id).subscribe({next:t=>{this.getUserByRecipe(t.id),this.getFileByRecipe(t.id),this.recipe=t,this.mostrar=!0,this.getCommentsFromRecipe(t.id)},error:t=>{_().fire("Error",t.error.mensaje,"error")}})}getUserByRecipe(t){this.recipeService.getUserByRecipe(t).subscribe({next:s=>{this.user=s},error:s=>{_().fire("Error",s.error.mensaje,"error")}})}getFileByRecipe(t){this.fileService.getFileByRecipeID(t).subscribe({next:s=>{null!=s&&(this.img=this.recipeService.getImage(s))},error:s=>{_().fire("Error",s.error.message,"error")}})}getCommentsFromRecipe(t){this.recipeService.getCommentsNotPendingFromRecipe(t).subscribe({next:s=>{this.comments=s,this.showComments=!0},error:s=>{_().fire("Error",s.error.message,"error")}})}addComment(t){this.commentRecipe.message=this.texto,this.recipeService.addCommentToRecipe(t,this.commentRecipe).subscribe({next:s=>{_().fire({title:"Comentario publicado",text:"Su comentario se ha publicado con \xe9xito. Estar\xe1 visible cuando el administrador lo confirme.",icon:"success",confirmButtonText:"Aceptar"}),this.texto=""},error:s=>{_().fire("Error",s.error.mensaje,"error")}})}back(){history.back()}showPostComment(){return this.accessService.getToken()}saveIDtoComment(){localStorage.setItem("cIDr",this.activeRoute.snapshot.params.id),this.router.navigateByUrl("/login")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.gz),e.Y36(T.v),e.Y36(f.J),e.Y36(d.v),e.Y36(h.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-recipe-details-template"]],inputs:{id:"id"},decls:2,vars:2,consts:[["class","card mb-3 mt-4 mx-auto border-0 text-center colorPinkP","style","width: 70%",4,"ngIf"],["class","container mt-4 col-lg-12 col-md-12 col-sm-12 col-xs-12",4,"ngIf"],[1,"card","mb-3","mt-4","mx-auto","border-0","text-center","colorPinkP",2,"width","70%"],[1,"row","g-0"],["class","col-md-5",4,"ngIf"],[1,"col-md-7","my-auto"],[1,"card-body","px-auto"],[1,"card-text"],[1,"col-md-5"],["src","assets/img/logo.svg","alt","Imagen no encontrada",1,"img-fluid","img-responsive","h-100"],[1,"img-fluid","img-responsive","h-100",3,"src","alt"],[1,"container","mt-4","col-lg-12","col-md-12","col-sm-12","col-xs-12"],["id","myTab","role","tablist",1,"nav","nav-tabs"],["role","presentation",1,"nav-item"],["id","home-tab","data-bs-toggle","tab","data-bs-target","#ingredientes","type","button","role","tab","aria-controls","home","aria-selected","true",1,"nav-link"],["id","profile-tab","data-bs-toggle","tab","data-bs-target","#elaboracion","type","button","role","tab","aria-controls","profile","aria-selected","true",1,"nav-link"],["id","home-tab","data-bs-toggle","tab","data-bs-target","#comentarios","type","button","role","tab","aria-controls","home","aria-selected","true",1,"nav-link"],["id","myTabContent",1,"tab-content"],["id","ingredientes","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],["class","mt-3",4,"ngFor","ngForOf"],["id","elaboracion","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],["id","comentarios","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],["class","mt-3",4,"ngIf"],["class","text-center mt-3",4,"ngIf"],[4,"ngIf"],[1,"row","p-1","my-3","justify-content-center"],[1,"text-center","mb-2"],[1,"btn","colorPurpleP",3,"click"],[1,"mt-3"],["for",""],[1,"text-center","mt-3"],[1,"m-2",3,"ngModel","ngModelChange"],[1,"btn","colorGreenP",3,"click"],[1,"card","text-center"],[3,"click"]],template:function(t,s){1&t&&(e.YNc(0,p,22,6,"div",0),e.YNc(1,B,26,6,"div",1)),2&t&&(e.Q6J("ngIf",null!=s.recipe&&null!=s.user),e.xp6(1),e.Q6J("ngIf",null!=s.recipe))},dependencies:[v.sg,v.O5,i.Fj,i.JJ,i.On]}),n})()}}]);